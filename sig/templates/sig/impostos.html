{% extends "sig/_base.html" %}

{% block title %}Custos Fixos - SIG{% endblock %}

{% block content %}
<div class="container">
    <h1>Custo Fixo - Impostos & Pagamentos</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flashes">
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <div class="form-container">
        <form method="POST" action="{{ url_for('sig.cadastrar_custos_fixos') }}">
            {{ form.hidden_tag() }}
            <fieldset class="form"><legend>Taxas & Impostos</legend>
                <div class="form-group">{{ form.alu.label }} {{ form.alu(class="form-control") }}</div>
                <div class="form-group">{{ form.IPTU.label }} {{ form.IPTU(class="form-control") }}</div>
                <div class="form-group">{{ form.luz.label }} {{ form.luz(class="form-control") }}</div>
                <div class="form-group">{{ form.agua.label }} {{ form.agua(class="form-control") }}</div>
                <div class="form-group">{{ form.tel.label }} {{ form.tel(class="form-control") }}</div>
                <div class="form-group">{{ form.net.label }} {{ form.net(class="form-control") }}</div>
                <div class="form-group">{{ form.alu_car.label }} {{ form.alu_car(class="form-control") }}</div>
                <div class="form-group">{{ form.MEI.label }} {{ form.MEI(class="form-control") }}</div>
            </fieldset>
            <fieldset class="form"><legend>Manutenção</legend>
                <div class="form-group">{{ form.descart.label }} {{ form.descart(class="form-control") }}</div>
                <div class="form-group">{{ form.n_prod.label }} {{ form.n_prod(class="form-control") }}</div>
                <div class="form-group">{{ form.equip.label }} {{ form.equip(class="form-control") }}</div>
            </fieldset>
            <fieldset class="form"><legend>Gestão</legend>
                <div class="form-group">{{ form.mkt.label }} {{ form.mkt(class="form-control") }}</div>
                <div class="form-group">{{ form.prolab.label }} {{ form.prolab(class="form-control") }}</div>
                <div class="form-group">{{ form.terc.label }} {{ form.terc(class="form-control") }}</div>
                <div class="form-group">{{ form.reserva.label }} {{ form.reserva(class="form-control") }}</div>
            </fieldset>
            {{ form.submit(class="btn btn-primary") }}
        </form>
    </div>

    <hr>
    <h2>Custos Salvos</h2>
    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
                <tr>
                    {% for header in cabecalho %}
                        <th>{{ header }}</th>
                    {% endfor %}
                    <th>Ação</th>
                </tr>
            </thead>
            <tbody>
                {% for row in dados %}
                <tr>
                    {% for value in row %}
                        <td>{{ value }}</td>
                    {% endfor %}
                    <td>
                        <form action="{{ url_for('sig.delete_record', table_name=table_name, record_id=row.id) }}" method="POST" onsubmit="return confirm('Tem certeza que deseja deletar este registro?');">
                            {{ form.hidden_tag() }}
                            <button type="submit" class="btn-delete">
                                <img src="{{ url_for('static', filename='icon/delete.png') }}" alt="Deletar" />
                            </button>
                        </form>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="{{ cabecalho|length + 1 }}">Nenhum custo encontrado.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}